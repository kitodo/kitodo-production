<!--
  * (c) Kitodo. Key to digital objects e. V. <contact@kitodo.org>
  *
  * This file is part of the Kitodo project.
  *
  * It is licensed under GNU General Public License version 3 or later.
  *
  * For the full copyright and license information, please read the
  * GPL3-License.txt file that was distributed with this source code.
  -->

<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <h:body>
        <!-- edit dialog -->
        <p:dialog widgetVar="changePasswordDialog"
                  id="changePasswordDialog"
                  header="#{msgs.passwordChange}"
                  width="400px"
                  modal="true"
                  resizable="false"
                  showHeader="false"
                  dynamic="true">
            <h3>#{msgs.passwordChange}</h3>
            <h:form id="changePasswordForm">
                <p:panelGrid id="passwordGrid" columns="1" layout="grid">
                    <p:row>
                        <h:panelGroup layout="block"
                                      styleClass="not-scrollable dialogFieldWrapper">
                            <div>
                                <!-- old password -->
                                <h:outputLabel for="oldPassword" value="#{msgs.oldPassword}"/>
                                <p:password redisplay="false" id="oldPassword" class="password"
                                            value="#{UserForm.oldPassword}" label="#{msgs.oldPassword}"
                                            required="true"/>
                            </div>

                            <div>
                                <!-- new password -->
                                <h:outputLabel for="newPassword" value="#{msgs.newPassword}"/>
                                <p:password redisplay="false" id="newPassword" class="password"
                                            value="#{UserForm.passwordToEncrypt}" label="#{msgs.newPassword}"
                                            match="newPasswordRepeat" required="true"
                                            validatorMessage="#{msgs.passwordsDontMatch}"/>
                            </div>

                            <div>
                                <!-- repeat new password -->
                                <h:outputLabel for="newPasswordRepeat" value="#{msgs.confirmNewPassword}"/>
                                <p:password redisplay="false" id="newPasswordRepeat" class="password"
                                            value="#{UserForm.passwordToEncrypt}" label="#{msgs.confirmNewPassword}"
                                            required="true"/>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup layout="block"
                                      styleClass="dialogButtonWrapper">
                            <p:commandButton id="save"
                                             value="#{msgs.save}"
                                             action="#{UserForm.changePasswordForCurrentUser}"
                                             icon="fa fa-floppy-o fa-lg"
                                             iconPos="right"
                                             validateClient="true"
                                             styleClass="primary right"
                                             oncomplete="PF('changePasswordDialog').hide();"/>
                            <p:commandButton id="cancel"
                                             value="#{msgs.cancel}"
                                             icon="fa fa-times fa-lg"
                                             iconPos="right"
                                             immediate="true"
                                             styleClass="secondary right"
                                             onclick="PF('changePasswordDialog').hide();"/>
                        </h:panelGroup>
                    </p:row>
                </p:panelGrid>
            </h:form>
        </p:dialog>
    </h:body>
</ui:composition>
